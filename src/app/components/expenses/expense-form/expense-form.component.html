<div class="container">
  @if (showToast()) {
    <div class="toast success">
      âœ… {{ toastMessage() }}
    </div>
  }

  <div class="card">
    <h2>Add New Expense</h2>
    <p class="subtitle">Track your spending by adding new transactions</p>
    
    <form [formGroup]="expenseForm" (ngSubmit)="onSubmit()" class="expense-form">
      <div class="form-group">
        <label>Description</label>
        <input type="text" formControlName="description" placeholder="e.g. Lunch, Rent">
      </div>

      <div class="form-group">
        <label>Amount</label>
        <input type="number" formControlName="amount" placeholder="0.00" step="0.01">
      </div>

      <div class="form-group">
        <label>Date</label>
        <input type="date" formControlName="date">
      </div>

      <div class="form-group">
        <label>Category</label>
        <select formControlName="categoryId">
          <option [value]="null" disabled>Select a category</option>
          @for (cat of categoryService.categories(); track cat.id) {
            <option [value]="cat.id">{{ cat.name }}</option>
          }
        </select>
      </div>

      <button type="submit" [disabled]="expenseForm.invalid || showToast()" class="btn-submit">
        @if (showToast()) { Adding... } @else { Save Expense }
      </button>
    </form>
  </div>

  <div class="expense-list-header">
    <h3>Recent Expenses</h3>
    <span class="count-badge">{{ recentExpenses().length }}</span>
  </div>

  <div class="expense-list">
    @for (expense of recentExpenses(); track expense.id) {
      <div class="expense-item">
        <div class="expense-header">
          <strong>{{ expense.description }}</strong>
          <span class="amount">{{ expense.amount | currency }}</span>
        </div>
        <div class="expense-details">
          <div class="detail-row">
            <span class="category-badge">{{ expense.categoryName }}</span>
            <span>{{ expense.date | date: 'MMM d, y' }}</span>
          </div>
        </div>
      </div>
    } @empty {
      <div class="empty-state">
        <p>No expenses yet</p>
        <small>Your recent transactions will appear here</small>
      </div>
    }
  </div>
</div>
