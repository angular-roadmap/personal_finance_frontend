<div class="expense-list-container">
  <div class="card">
    <div class="header">
      <div>
        <h2>Expense History</h2>
        <p class="subtitle">View all your transactions</p>
      </div>
      <div class="stats">
        <span class="stat-item">
          <strong>{{ totalElements() }}</strong> total expenses
        </span>
      </div>
    </div>

    @if (isLoading()) {
      <div class="spinner-wrapper">
        <div class="spinner">Loading expenses...</div>
      </div>
    } @else {
      <div class="table-wrapper">
        <table class="expense-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Category</th>
              @if (authService.isAdmin()) {
                <th>User</th>
              }
              <th class="align-right">Amount</th>
            </tr>
          </thead>
          <tbody>
            @for (expense of expenses(); track expense.id) {
              <tr>
                <td>
                  <span class="date">{{ expense.date | date: 'MMM d, y' }}</span>
                </td>
                <td>
                  <strong>{{ expense.description }}</strong>
                </td>
                <td>
                  <span class="category-badge">{{ expense.categoryName }}</span>
                </td>
                @if (authService.isAdmin()) {
                  <td>
                    <span class="user-badge">{{ expense.username || 'Unknown' }}</span>
                  </td>
                }
                <td class="align-right">
                  <strong class="amount">{{ expense.amount | currency }}</strong>
                </td>
              </tr>
            } @empty {
              <tr>
                <td [attr.colspan]="authService.isAdmin() ? 5 : 4" class="empty-state">
                  <div class="empty-message">
                    <p>No expenses found</p>
                    <small>Start by adding your first expense!</small>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      @if (totalPages() > 1) {
        <div class="pagination">
          <button 
            (click)="previousPage()" 
            [disabled]="currentPage() === 0"
            class="btn-page">
            ← Previous
          </button>
          
          <span class="page-info">
            Page {{ currentPage() + 1 }} of {{ totalPages() }}
          </span>
          
          <button 
            (click)="nextPage()" 
            [disabled]="currentPage() >= totalPages() - 1"
            class="btn-page">
            Next →
          </button>
        </div>
      }
    }
  </div>
</div>
